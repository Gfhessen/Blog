<section class="container centered">
  <div class="about">
    {{ if and (isset .Site.Params "avatarurl") (not (isset .Site.Params "gravatar")) }}
      {{ with .Site.Params.avatarURL }}
        <div class="avatar"><img src="{{ . | relURL }}" alt="avatar" width="200px" height="200px"></div>
      {{ end }}
    {{ end }}
    {{ with .Site.Params.gravatar }}
      <div class="avatar"><img src="https://www.gravatar.com/avatar/{{md5 .}}?s=240&d=mp" alt="gravatar" width="200px" height="200px"></div>
    {{ end }}
    <h1>{{ .Site.Params.author }}</h1>
    <h2>{{ .Site.Params.info }}</h2>
    {{ with .Site.Params.social }}
    <ul>
      {{ range sort . "weight" }}
        {{ if .icon }}
          <li>
            <a href="{{ .url | safeURL }}" aria-label="{{ .name }}" {{ if .rel }}rel="{{ .rel }}"{{ end }} {{ if .target }}target="{{ .target }}"{{ end }} {{ if .type }}type="{{ .type }}"{{ end }}>
              <i class="{{ .icon }}" aria-hidden="true"></i>
            </a>
          </li>
        {{ else }}
          <li>
            <a href="{{ .url | safeURL }}" aria-label="{{ .name }}" {{ if .rel }}rel="{{ .rel }}"{{ end }} {{ if .target }}target="{{ .target }}"{{ end }}>{{ .name }}</a>
          </li>
        {{ end }}
      {{ end }}
    </ul>
    {{ end }}
  </div>
</section>
{{ if .Site.Params.showRecent }}
{{ if .Site.Params.showRecentType }}
<section class="list recent">
  <h3 class="title">
    {{ i18n "recent_posts" }}
  </h3>
  <div class="recentposts">
  {{ range first .Site.Params.showRecent (where .Paginator.Pages "Section" .Site.Params.showRecentType) }}
    <ul class="recentpost">
      <li>
        <span>{{ .Date.Format (.Site.Params.dateFormat | default "January 2, 2006" ) }}</span>
        <a class="recentblock" href="{{ .Params.externalLink | default .RelPermalink }}">
        <p class="title">{{ .Title }}</p>
          <div class="recentimg">
            {{ $source := "" }}
            {{- with .Params.images -}}
              {{ $source = index (.) 0 }}
            {{ else -}}
              {{- with .Site.Params.images -}}
                {{ $source = index (.) 0 }}
              {{- end -}}
            {{- end }}

            {{ with $source }}
              {{ $img := "" }}
              {{ $imgPath := (path.Join "/content" . )  }}
              {{ if fileExists $imgPath }}
                  {{ $img = imageConfig $imgPath }}
              {{ else }}
                  {{ $imgPath := (path.Join "/static" . ) }}
                  {{ if fileExists $imgPath }}
                      {{ $img = imageConfig $imgPath }}
                  {{ end }}
              {{ end }}
                <img
                src="{{ . }}"
                alt="article image"
                loading="lazy"
                width="{{ $img.Width }}"
                height="{{ $img.Height }}"
                />
            {{ end }}
          </div>
        </a>
      </li>
    </ul>
  {{ end }}
  </div>
  <a class="seemore" href="{{ path.Join .RelPermalink .Site.Params.showRecentType }}">
    {{ i18n "see_more"}} 
  </a>
</section>
{{ end }}
{{ end }}
